<html>
  <head>
    <title>SMT</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css"></link>
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.27.2.min.js"></script>

    <script>eruda.init();</script>
    <base target="_blank" />
  </head>
  <body>
    <canvas id="canvas"></canvas>
    
    <script>
      var c = document.getElementById("canvas").getContext("2d")
      var water = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
      
      //view is at coords 0 0
      var view = [0,0]
      var gstat = {
  "bg":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
  "streets":[
    {
      "name": "Ding-Dong",
      "type": "street",
      "direction": 2, 
      "origin": [0,0],
      "ending": [10,0]
    }
  ],
  "stations":[
    {
      "name": "Ding-Dong Street",
      "pos": [5,0],
      "trains": ["c"]
    }
  ],
  "trains":[
    {
      "id": "c",
      "name": "c",
      "tcol": "white",
      "color": "blue",
      "stations": [0]
    }
  ]
}
      function update(){
        
        for(let ix = 0; ix<=15; ix++){
          for(let iy = 0; iy<=15; iy++){
            var x = view[0]*16+ix
            var y = view[1]*16+iy
            switch(Array.from(gstat.bg)[(x)*48+y]){
              case "0":
                c.fillStyle="blue"
                break
              case "1":
                c.fillStyle="lime"
                break
              case "2":
                c.fillStyle="yellow"
                break
              case "3":
                c.fillStyle="#404040"
                break
            }
            c.fillRect(ix*16, iy*16, 16, 16)
          }
        }
      }
      update()
    </script>
  </body>
</html>
